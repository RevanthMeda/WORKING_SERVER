{% extends "base.html" %}

{% block title %}Reset with Code - {{ super() }}{% endblock %}

{% block head %}
<style>
  .auth-shell { display:flex; align-items:center; justify-content:center; min-height:70vh; padding:24px; }
  .auth-card { background:#fff; border-radius:16px; box-shadow:0 14px 32px rgba(14,38,74,0.08); max-width:520px; width:100%; padding:32px; text-align:center; border:1px solid rgba(90,127,163,0.1); }
  .auth-header { margin-bottom:16px; }
  .auth-header h1 { margin:0 0 6px; font-weight:700; color:var(--cully-dark); }
  .auth-header p { margin:0; color:#5f6c85; }
  .auth-form { margin-top:20px; text-align:left; display:grid; gap:14px; }
  .auth-form label { font-weight:600; color:var(--cully-dark); }
  .auth-form input { width:100%; padding:14px; border-radius:10px; border:2px solid var(--cully-light-gray); font-size:1rem; box-sizing:border-box; }
  .auth-form input:focus { border-color:var(--cully-blue); outline:none; box-shadow:0 0 0 3px rgba(123,165,199,0.2); }
  .auth-btn { width:100%; padding:14px; border-radius:10px; border:none; background:linear-gradient(135deg, var(--cully-navy), var(--cully-blue)); color:#fff; font-weight:700; letter-spacing:0.03em; cursor:pointer; }
  .auth-links { margin-top:18px; text-align:center; color:#5f6c85; }
  .auth-links a { color:var(--cully-navy); font-weight:700; text-decoration:none; }
  .auth-links a:hover { text-decoration:underline; }
</style>
{% endblock %}

{% block content %}
<div class="auth-shell">
  <div class="auth-card">
    <div class="auth-header">
      <h1>Enter your code</h1>
      <p>Check your email for the 6-digit code. Codes expire after 10 minutes.</p>
    </div>
    <form class="auth-form" method="post" action="{{ url_for('auth.reset_password_otp') }}">
      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" value="{{ email or '' }}" required>

      <label for="otp_code">Verification code</label>
      <input type="text" id="otp_code" name="otp_code" pattern="\\d{6}" placeholder="123456" required>

      <label for="password">New password</label>
      <input type="password" id="password" name="password" required minlength="6" autocomplete="new-password">

      <label for="confirm_password">Confirm new password</label>
      <input type="password" id="confirm_password" name="confirm_password" required minlength="6" autocomplete="new-password">

      <button type="submit" class="auth-btn">Update password</button>
    </form>
    <div class="auth-links">
      <p><a href="{{ url_for('auth.forgot_password') }}">Back to reset options</a> â€¢ <a href="{{ url_for('auth.login') }}">Back to login</a></p>
    </div>
  </div>
</div>
{% endblock %}
