{% extends 'base.html' %}

{% block title %}Change Password - {{ super() }}{% endblock %}

{% block head %}
<style>
    .account-layout {
        display: flex;
        flex-direction: column;
        gap: var(--space-xl);
        max-width: 640px;
        margin: 0 auto;
    }

    .account-card {
        background: var(--cully-white);
        border-radius: 20px;
        box-shadow: var(--shadow-sm);
        border: 1px solid rgba(90, 127, 163, 0.08);
        padding: var(--space-xl);
        display: grid;
        gap: var(--space-lg);
    }

    .account-card header h2 {
        margin: 0;
        font-size: 1.5rem;
        color: var(--cully-dark);
    }

    .account-card header p {
        margin: 0;
        color: var(--cully-gray);
    }

    .account-form {
        display: grid;
        gap: var(--space-md);
    }

    .form-field {
        display: grid;
        gap: var(--space-xs);
    }

    .form-field label {
        font-weight: 600;
        color: var(--cully-dark);
    }

    .form-field input[type="password"] {
        border-radius: 12px;
        border: 1px solid var(--cully-light-gray);
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
        transition: var(--transition-smooth);
    }

    .form-field input[type="password"]:focus {
        outline: none;
        border-color: var(--cully-blue);
        box-shadow: 0 0 0 3px rgba(123, 165, 199, 0.25);
    }

    .form-actions {
        display: flex;
        flex-wrap: wrap;
        gap: var(--space-sm);
        align-items: center;
    }

    .help-text {
        font-size: 0.85rem;
        color: var(--cully-gray);
    }
</style>
{% endblock %}

{% block content %}
<section class="page-hero">
    <div class="page-hero__content">
        <div>
            <h1 class="page-hero__title"><i class="fas fa-key"></i> Change Password</h1>
            <p class="page-hero__subtitle">Update your credentials to keep your account secure and aligned with company policy.</p>
        </div>
    </div>
</section>

<nav class="module-nav">
    <div class="module-nav__links">
        <a class="module-nav__link" href="{{ url_for('dashboard.engineer') }}"><i class="fas fa-home"></i> Dashboard</a>
        <a class="module-nav__link" href="{{ url_for('dashboard.my_reports') }}"><i class="fas fa-folder-open"></i> My reports</a>
        <a class="module-nav__link" href="{{ url_for('notifications.notification_center') }}"><i class="fas fa-bell"></i> Notifications</a>
        <a class="module-nav__link module-nav__link--active" href="{{ url_for('auth.change_password') }}"><i class="fas fa-key"></i> Change password</a>
    </div>
    <div class="module-nav__meta">
        <i class="fas fa-shield-alt"></i> Use at least 8 characters with mixed case, numbers, and symbols.
    </div>
</nav>

<div class="account-layout">
    <article class="account-card">
        <header>
            <h2>Update password</h2>
            <p>Enter your current password and choose a new one. You will be signed out on save.</p>
        </header>
        <form method="POST" class="account-form">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">

            <div class="form-field">
                <label for="current_password">Current password <span class="status-chip status-chip--pending" style="font-size: 0.75rem; padding: 0.2rem 0.6rem;">Required</span></label>
                <input type="password" id="current_password" name="current_password" required placeholder="Enter your current password">
            </div>

            <div class="form-field">
                <label for="new_password">New password</label>
                <input type="password" id="new_password" name="new_password" required placeholder="Enter new password">
                <span class="help-text">Minimum 8 characters with upper/lower case, number, and symbol.</span>
            </div>

            <div class="form-field">
                <label for="confirm_password">Confirm new password</label>
                <input type="password" id="confirm_password" name="confirm_password" required placeholder="Confirm new password">
            </div>

            <div class="form-actions">
                <button type="submit" class="button-primary">
                    <i class="fas fa-save"></i>
                    Change password
                </button>
                <a href="{{ url_for('dashboard.engineer') }}" class="action-secondary">
                    <i class="fas fa-arrow-left"></i>
                    Back to dashboard
                </a>
            </div>
        </form>
    </article>
</div>
{% endblock %}
